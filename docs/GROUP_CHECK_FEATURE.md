# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞—Ñ—ñ–∫—É –∑–∞ –Ω–æ–º–µ—Ä–æ–º —á–µ—Ä–≥–∏

## –û–±–∑–æ—Ä

–ö–æ–º–∞–Ω–¥–∞ `/check` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∞–¥—Ä–µ—Å—É** (–∫–∞–∫ —Ä–∞–Ω—å—à–µ):
   - `/check –º. –î–Ω—ñ–ø—Ä–æ, –≤—É–ª. –°–æ–Ω—è—á–Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω–∞, 6`
   
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É —á–µ—Ä–≥–∏** (–Ω–æ–≤–æ–µ! ‚ö°):
   - `/check 3.1` –∏–ª–∏ `/check 3,1`

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–≤–æ–¥–∞

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –≤–≤–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥—Ä–µ—Å –∏–ª–∏ –Ω–æ–º–µ—Ä —á–µ—Ä–≥–∏:

- **–ü–∞—Ç—Ç–µ—Ä–Ω —á–µ—Ä–≥–∏**: 1-2 —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∞/–∑–∞–ø—è—Ç–∞—è, 1-2 —Ü–∏—Ñ—Ä—ã
  - ‚úÖ `3.1` ‚Üí —á–µ—Ä–≥–∞
  - ‚úÖ `3,1` ‚Üí —á–µ—Ä–≥–∞ (–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ `3.1`)
  - ‚úÖ `12.5` ‚Üí —á–µ—Ä–≥–∞
  - ‚ùå `3` ‚Üí –∞–¥—Ä–µ—Å (–Ω–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è)
  - ‚ùå `123.456` ‚Üí –∞–¥—Ä–µ—Å (—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ü–∏—Ñ—Ä)

- **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ** —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–¥—Ä–µ—Å–æ–º

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã —Å —á–µ—Ä–≥–∞–º–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ —á–µ—Ä–≥–∏**:
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Å–≤–µ–∂–∏–π –∫—ç—à (< 15 –º–∏–Ω—É—Ç) ‚Üí –º–∏—Ç—Ç—î–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å! ‚ö°
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è —á–µ—Ä–≥–∏ (–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞)

2. **–ö—ç—à —É—Å—Ç–∞—Ä–µ–ª –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**:
   - –ò—â–µ–º –ª—é–±–æ–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –∏–∑ —ç—Ç–æ–π —á–µ—Ä–≥–∏ –≤ –ë–î
   - –ó–∞–ø—É—Å–∫–∞–µ–º –ø–∞—Ä—Å–µ—Ä –¥–ª—è —ç—Ç–æ–≥–æ –∞–¥—Ä–µ—Å–∞
   - –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à —á–µ—Ä–≥–∏
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

3. **–ß–µ—Ä–≥–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞**:
   - –ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –∏–∑ —ç—Ç–æ–π —á–µ—Ä–≥–∏
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—Å–µ–≥–æ  
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–≥–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ  
‚úÖ **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å**: –Ω–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å, –∫–∞–∫—É—é –∫–æ–º–∞–Ω–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å  

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞

```python
def detect_check_input_type(text: str) -> tuple[str, str]:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≤–≤–æ–¥–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /check.
    
    Returns:
        ("group", normalized_group) - –µ—Å–ª–∏ —ç—Ç–æ –≥—Ä—É–ø–ø–∞
        ("address", original_text) - –µ—Å–ª–∏ —ç—Ç–æ –∞–¥—Ä–µ—Å
        ("unknown", "") - –µ—Å–ª–∏ –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
    """
```

–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤: `common/bot_base.py`

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

–§—É–Ω–∫—Ü–∏—è `handle_check_command` –≤ `common/handlers.py` —Ç–µ–ø–µ—Ä—å:
1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≤–≤–æ–¥–∞
2. –í—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É (–¥–ª—è —á–µ—Ä–≥–∏ –∏–ª–∏ –∞–¥—Ä–µ—Å–∞)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /check 3.1
–ë–æ—Ç: [–º–∏—Ç—Ç—î–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ –∫–µ—à—É]
     üìç –ß–µ—Ä–≥–∞: 3.1
     [–¥–∏–∞–≥—Ä–∞–º–º–∞ –≥—Ä–∞—Ñ–∏–∫–∞]

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /check –º. –î–Ω—ñ–ø—Ä–æ, –≤—É–ª. –°–æ–Ω—è—á–Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω–∞, 6
–ë–æ—Ç: ‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä—è—é –≥—Ä–∞—Ñ—ñ–∫...
     üìç –ê–¥—Ä–µ—Å–∞: –º. –î–Ω—ñ–ø—Ä–æ, –≤—É–ª. –°–æ–Ω—è—á–Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω–∞, 6
     üë• –ß–µ—Ä–≥–∞: 3.1
     [–¥–∏–∞–≥—Ä–∞–º–º–∞ –≥—Ä–∞—Ñ–∏–∫–∞]
```

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞

–°–æ–æ–±—â–µ–Ω–∏–µ `/help` —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:

```
**–î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≥—Ä–∞—Ñ—ñ–∫—É** –≤–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É /check, –¥–æ–¥–∞–≤—à–∏ –∞–¥—Ä–µ—Å—É –∞–±–æ –Ω–æ–º–µ—Ä —á–µ—Ä–≥–∏:

**–ó–∞ –∞–¥—Ä–µ—Å–æ—é:**
`/check –º. –ú—ñ—Å—Ç–æ, –≤—É–ª. –í—É–ª–∏—Ü—è, –ë—É–¥–∏–Ω–æ–∫`

**–ó–∞ –Ω–æ–º–µ—Ä–æ–º —á–µ—Ä–≥–∏ (–º–∏—Ç—Ç—î–≤–æ! ‚ö°):**
`/check 3.1` –∞–±–æ `/check 3,1`
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤

–¢–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `common/tests/test_group_detection.py` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç pytest:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø
python -m pytest common/tests/test_group_detection.py -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã common
python -m pytest common/tests/ -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
python -m pytest common/tests/test_group_detection.py --cov=common.bot_base --cov-report=term
```

### –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

41 —Ç–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç:
- ‚úÖ –í—Å–µ 12 –≤–∞–ª–∏–¥–Ω—ã—Ö DTEK –≥—Ä—É–ø–ø (1.1-6.2)
- ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (—Ç–æ—á–∫–∞, –∑–∞–ø—è—Ç–∞—è, –ø—Ä–æ–±–µ–ª)
- ‚úÖ –ü—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
- ‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –≥—Ä—É–ø–ø—ã (–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏)
- ‚úÖ –ê–¥—Ä–µ—Å–∞ (—É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ, –ª–∞—Ç–∏–Ω—Å–∫–∏–µ)
- ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, etc)

–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ! ‚úÖ

